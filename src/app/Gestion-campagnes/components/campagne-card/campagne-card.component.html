<div class="campagne-details">
  <div>
    <span
      >Créé par:
      {{ campagne?.userLastName + " " + campagne?.userFirstName }}</span
    >
  </div>
  <div class="campagne-details__heading">
    <span>{{ campagne?.name }}</span>
    <span
      [class.desactive]="campagne?.status === CAMPAGNES_STATUS_ENUM.DESACTIVE"
      [class.en-cours]="campagne?.status === CAMPAGNES_STATUS_ENUM.EN_COURS"
      [class.planifier]="campagne?.status === CAMPAGNES_STATUS_ENUM.PLANIFIE"
      [class.cloture]="campagne?.status === CAMPAGNES_STATUS_ENUM.CLOTURE"
      [class.termine]="campagne?.status === CAMPAGNES_STATUS_ENUM.TERMINATE"
      >{{ getStatusLabel(campagne?.status) }}</span
    >
  </div>
  <div class="campagne-details__applist">
    <!-- <div #campagneDetails>
      <span>Applications:</span>
      <ng-container *ngIf="campagne?.applications?.length ?? 0">
        <span *ngFor="let app of campagne!.applications" class="badge">{{
          app.nom
        }}</span>
      </ng-container>
    </div> -->
    <span
      >Période:
      {{
        campagne?.startDate
          ? (campagne?.startDate | date : "dd/MM/yyyy")
          : "--/--/---"
      }}
      -
      {{
        campagne?.estimatedEndDate
          ? (campagne?.estimatedEndDate | date : "dd/MM/yyyy")
          : "--/--/---"
      }}
    </span>
  </div>
  <div class="campagne-details__periode"></div>
</div>
<!-- CAMPAGNE CLÔTURÉE -->
<div
  #campagneAction
  class="campagne-action"
  *ngIf="campagne?.status === CAMPAGNES_STATUS_ENUM.CLOTURE"
>
  <button
    *HasPermission="'DETAILS_CAMPAGNE'"
    class="generic-btn"
    variante="tertiary muted"
    type="button"
    (click)="onEmitCampagne()"
  >
    <div class="preview-icon"></div>
    Voir les détails
  </button>
  <button
    *HasPermission="'HISTORIQUE_MODIFICATION_CAMPAGNE'"
    class="generic-btn"
    variante="tertiary muted"
    type="button"
    (click)="onHistoryCampagne($event)"
  >
    <div class="history-icon"></div>
    Historique des modifications
  </button>
</div>

<!-- CAMPAGNE DÉSACTIVÉE -->
<div
  #campagneAction
  class="campagne-action"
  *ngIf="campagne?.status === CAMPAGNES_STATUS_ENUM.DESACTIVE"
>
  <button
    *HasPermission="'DETAILS_CAMPAGNE'"
    class="generic-btn"
    variante="tertiary muted"
    type="button"
    (click)="onEmitCampagne()"
  >
    <div class="preview-icon"></div>
    Voir les détails
  </button>
  <button
    *HasPermission="'HISTORIQUE_MODIFICATION_CAMPAGNE'"
    class="generic-btn"
    variante="tertiary muted"
    type="button"
    (click)="onHistoryCampagne($event)"
  >
    <div class="history-icon"></div>
    Historique des modifications
  </button>
  <button
    *HasPermission="'MODIFIER_CAMPAGNE'"
    class="generic-btn"
    variante="tertiary muted"
    type="button"
    (click)="editCampagne($event)"
  >
    <div class="edit-icon"></div>
    Modifier
  </button>
  <button
    *HasPermission="'REACTIVER_CAMPAGNE'"
    class="generic-btn"
    variante="tertiary outline success"
    type="button"
    (click)="enableCampagne($event)"
  >
    <svg
      class="w-6 h-6 text-gray-800 dark:text-white"
      aria-hidden="true"
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      fill="none"
      viewBox="0 0 24 24"
    >
      <path
        stroke="currentColor"
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="1.7"
        d="M12 5.365V3m0 2.365a5.338 5.338 0 0 1 5.133 5.368v1.8c0 2.386 1.867 2.982 1.867 4.175 0 .593 0 1.193-.538 1.193H5.538c-.538 0-.538-.6-.538-1.193 0-1.193 1.867-1.789 1.867-4.175v-1.8A5.338 5.338 0 0 1 12 5.365Zm-8.134 5.368a8.458 8.458 0 0 1 2.252-5.714m14.016 5.714a8.458 8.458 0 0 0-2.252-5.714M8.54 17.901a3.48 3.48 0 0 0 6.92 0H8.54Z"
      />
    </svg>
    Réactiver
  </button>
</div>

<!-- CAMPAGNE EN COURS/ACTIVE -->
<div
  #campagneAction
  class="campagne-action"
  *ngIf="campagne?.status === CAMPAGNES_STATUS_ENUM.EN_COURS"
>
  <button
    *HasPermission="'DETAILS_CAMPAGNE'"
    class="generic-btn"
    variante="tertiary muted"
    type="button"
    (click)="onEmitCampagne()"
  >
    <div class="preview-icon"></div>
    Voir les détails
  </button>
  <button
    *HasPermission="'HISTORIQUE_MODIFICATION_CAMPAGNE'"
    class="generic-btn"
    variante="tertiary muted"
    type="button"
    (click)="onHistoryCampagne($event)"
  >
    <div class="history-icon"></div>
    Historique des modifications
  </button>
  <button
    *HasPermission="'PROROGER_CAMPAGNE'"
    class="generic-btn"
    variante="tertiary muted"
    type="button"
    (click)="editCampagne($event)"
  >
    <div class="edit-icon"></div>
    Proroger
  </button>
  <button
    *HasPermission="'CLOTURE_CAMPAGNE'"
    class="generic-btn"
    variante="tertiary muted"
    type="button"
    (click)="closeCampagne($event)"
  >
    <div class="valid-icon"></div>
    Clôturer la campagne
  </button>
  <button
    *HasPermission="'DESACTIVER_CAMPAGNE'"
    class="generic-btn"
    variante="tertiary danger"
    type="button"
    (click)="disableCampagne($event)"
  >
    Désactiver
  </button>
</div>

<!-- CAMPAGNE PLANIFIÉE -->
<div
  #campagneAction
  class="campagne-action"
  *ngIf="campagne?.status === CAMPAGNES_STATUS_ENUM.PLANIFIE"
>
  <button
    *HasPermission="'DETAILS_CAMPAGNE'"
    class="generic-btn"
    variante="tertiary muted"
    type="button"
    (click)="onEmitCampagne()"
  >
    <div class="preview-icon"></div>
    Voir les détails
  </button>
  <button
    *HasPermission="'HISTORIQUE_MODIFICATION_CAMPAGNE'"
    class="generic-btn"
    variante="tertiary muted"
    type="button"
    (click)="onHistoryCampagne($event)"
  >
    <div class="history-icon"></div>
    Historique des modifications
  </button>
  <button
    *HasPermission="'MODIFIER_CAMPAGNE'"
    class="generic-btn"
    variante="tertiary muted"
    type="button"
    (click)="editCampagne($event)"
  >
    <div class="edit-icon"></div>
    Modifier
  </button>
  <button
    *HasPermission="'LANCER_CAMPAGNE'"
    class="generic-btn"
    variante="tertiary muted"
    type="button"
    (click)="planifierCampagne($event)"
  >
    <div class="speaker-icon"></div>
    lancer la campagne
  </button>
</div>
<!-- CAMPAGNE TERMINER -->
<div
  #campagneAction
  class="campagne-action"
  *ngIf="campagne?.status === CAMPAGNES_STATUS_ENUM.TERMINATE"
>
  <button
    *HasPermission="'DETAILS_CAMPAGNE'"
    class="generic-btn"
    variante="tertiary muted"
    type="button"
    (click)="onEmitCampagne()"
  >
    <div class="preview-icon"></div>
    Voir les détails
  </button>
  <button
    *HasPermission="'HISTORIQUE_MODIFICATION_CAMPAGNE'"
    class="generic-btn"
    variante="tertiary muted"
    type="button"
    (click)="onHistoryCampagne($event)"
  >
    <div class="history-icon"></div>
    Historique des modifications
  </button>
  <button
    *HasPermission="'PROROGER_CAMPAGNE'"
    class="generic-btn"
    variante="tertiary muted"
    type="button"
    (click)="editCampagne($event)"
  >
    <div class="edit-icon"></div>
    Proroger
  </button>
  <button
    *HasPermission="'CLOTURE_CAMPAGNE'"
    class="generic-btn"
    variante="tertiary muted"
    type="button"
    (click)="closeCampagne($event)"
  >
    <div class="valid-icon"></div>
    Clôturer la campagne
  </button>
</div>
